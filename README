Installation
============
It is recommanded to use Debian Lenny or above

python-django python-sqlalchemy python-psycopg2 postgresql postgresql-contrib libapache2-mod-auth-psql pwgen openoffice.org-sdbc-postgresql oomailing

oomailing package can be get at http://www.nirgal.com/debian/

Apache
======
Enable ssl, auth_pgsql and rewrite in apache:
a2enmod ssl 000_auth_pgsql rewrite

Generate self-signed certificate:
openssl req -nodes -x509 -days 3650 -new -newkey rsa:2048 -subj /CN=nike.fr.gl3 -keyout nike.key -out nike.crt

Listen on port 443
Add a new line "Listen 443" to /etc/apache2/ports.conf"

Oomailing
=========

Launch openoffice setup a database:
Connect to an existing database using postgresql
Database url should be something like "dbname=ngw host=localhost password=secretpassord" and username should be setup correctly
Save the file as /usr/lib/ngw/ngw.odb 
Then create a "ngw" data source in the oomailing account poingting at /usr/lib/ngw/ngw.odb

Postgres
========
createdb ngw -E unicode

Rigth now, it's not possible to start from an empty database. You need to restore a backup.

See http://developer.postgresql.org/pgdocs/postgres/contrib.html, as postgres user, run
postgres:~$ psql ngw -f /usr/share/postgresql/8.3/contrib/int_aggregate.sql
postgres:~$ psql ngw -f /usr/share/postgresql/8.3/contrib/_int.sql

GPG
===
mkdir /var/lib/ngw
chown www-data /var/lib/ngw

Right now, keys needs to be imported by hand: gpg --homedir /var/lib/ngw/ --import akey.key

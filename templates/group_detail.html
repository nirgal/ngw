{% extends "list_contact.html" %}

{% block body %}
    {% if cg.description %}{{ cg.description }}<br><br>{% endif %}
    {% if cg.date %}Date: <b>{{ cg.date }}</b><br>{% endif %}
    {% if cg.budget_code %}Budget code: {{ cg.budget_code }}<br>{% endif %}

    <p>
    <script>
    function submit_display(form) {
        display="";
        if (form.id_display_member.checked) display+="m";
        if (form.id_display_invited.checked) display+="i";
        if (form.id_display_declined.checked) display+="d";
        if (form.id_display_subgroups.checked) display+="g";
        document.forms['mainform'].display.value=display;
        document.forms['mainform'].submit();
    }
    </script>
    <form>Show:
    <input type=checkbox name="display_member" id="id_display_member" {% if display_member %}checked {% endif %}onchange="submit_display(this.form);"><label for="id_display_member">Members</label>
    <input type=checkbox name="display_invited" id="id_display_invited" {% if display_invited %}checked {% endif %}onchange="submit_display(this.form);"><label for="id_display_invited">Invited people</label>
    <input type=checkbox name="display_declined" id="id_display_declined" {% if display_declined %}checked {% endif %}onchange="submit_display(this.form);"><label for="id_display_declined">Declined invitations</label>
    <input type=checkbox name="display_subgroups" id="id_display_subgroups" {% if display_subgroups %}checked {% endif %}onchange="submit_display(this.form);"><label for="id_display_subgroups">Include subgroups</label>
    </form>
    <br>
    {{ block.super }}

    {% comment %}
    {% with cg.get_direct_invited.count as ci %}
        {{ ci }} contact{{ ci|pluralize }} {{ ci|pluralize:"have,has" }} been invited in that group, but {{ ci|pluralize:"are,is" }} not member yet.
    {% endwith %}
    {% endcomment %}
{% endblock %}

{% block presubmitbar %}
    {% if cg.direct_subgroups %}
        <h1 class=boxheader>Sub groups</h1>
        <div class=box>
        People in sub-groups automatically are members / invited.
        <br>
        {% for sg in cg.direct_subgroups  %}
        ‣ <a href="{{ sg.get_absolute_url }}">{{ sg.unicode_with_date }}</a>{{sg.subgroups_includinghtml|safe}}<br>
        {% endfor %}
        </div>
    {% endif %}
    
    {% for f in files %}
        {% if forloop.first %}
            <h1 class=boxheader>Files</h1>
            <div class=box>
        {% endif %}
        ‣ <a href="/static/g/{{cg.id}}/{{f}}">{{f}}</a><br>
        {% if forloop.last %}
            </div>
        {% endif %}
    {% endfor %}
{% endblock %}

    
{% block submitbar %}
<div id=submitbar>
    <a href="javascript:show_field_selection();" id=default> Select displayed columns</a>
    <a href="{{cg.get_absolute_url}}edit">Edit</a>
    <a href="emails{{baseurl}}">Emails</a>
    <a href="vcards{{baseurl}}">Vcards</a> 
    {% if cg.field_group %}
    <a href="add"><img src="/media/img/admin/icon_addlink.gif" border=0> Create a new contact in that group</a>
    {% endif %}
    <a href="../news/">News</a> 
</div>
{% endblock %}

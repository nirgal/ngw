{% extends "base.html" %}
{% load ngwtags %}

{% block body %}
    <table class=objlist>
    <tr><td>
    
    {% for row in rows %}
        {{ row|get:0 }}: <b>{{ row|get:1 }}</b><br>
    {% endfor %}
    {% for g in contact.get_directgroups_member|group_visible_by:request.user.id %}
        {% if forloop.first %}Member of groups:<br>{% endif %}
        &nbsp;&nbsp;&nbsp;{{ g|group_with_link }}
        {% for sg in g.get_supergroups|group_visible_by:request.user.id %}
        {% if forloop.first %}( implies {%else%}, {% endif %}
        {{ sg|group_with_link }}
        {% if forloop.last %}){% endif %}
        {% endfor %}
        <br> 
    {% endfor %}
    {% for g in contact.get_directgroups_invited|group_visible_by:request.user.id %}
        {% if not forloop.first %}Invited in groups:<br>{% endif %}
        &nbsp;&nbsp;&nbsp;{{ g|group_with_link }}
        {% for sg in g.get_supergroups|group_visible_by:request.user.id %}
        {% if forloop.first %}( implies {%else%}, {% endif %}
        {{ sg|group_with_link }}
        {% if forloop.last %}){% endif %}
        {% endfor %}
        <br> 
    {% endfor %}
    {% for g in contact.get_directgroups_declinedinvitation|group_visible_by:request.user.id %}
        {% if not forloop.first %}Declined invitation in groups:<br>{% endif %}
        &nbsp;&nbsp;&nbsp;{{ g|group_with_link }}
        <br> 
    {% endfor %}

    </table>

    {% block submitbar %}
    <div id=submitbar>
      {% if user.is_admin %}
      <a id=default href="..">Contact list</a>
      {% endif %}
      <a href="edit">Edit</a>
      {% if user.is_admin %}
      <a href="vcard">VCard</a>
      <a href="http://maps.google.com/maps?q={{ contact.get_addr_semicol }}">Google map</a>
      {% endif %}
      {% if contact.get_login %}
      <a href="pass">Change password</a>
      {% if user.is_admin %}
      <a href="{{contact.get_absolute_url}}filters/">Filters</a>
      {% endif %}
      {% endif %}
    </div>
    {% endblock %}

{% endblock %}
